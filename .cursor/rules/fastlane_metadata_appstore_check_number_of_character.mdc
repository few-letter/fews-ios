# JSON ë©”íƒ€ë°ì´í„° ê¸€ììˆ˜ ê²€ì¦ ë„êµ¬

## ğŸ“Š Apple App Store ê¸€ììˆ˜ ì œí•œ

| í•„ë“œëª…        | ì œí•œ    | ì„¤ëª…               |
| ------------- | ------- | ------------------ |
| `name`        | 30ì    | ì•± ì´ë¦„            |
| `subtitle`    | 30ì    | ë¶€ì œëª©             |
| `keywords`    | 100ì   | í‚¤ì›Œë“œ (ì‰¼í‘œ í¬í•¨) |
| `description` | 4,000ì | ì•± ì„¤ëª…            |

> âš ï¸ **ì¤‘ìš”**: ë°”ì´íŠ¸ê°€ ì•„ë‹Œ **ë¬¸ì ìˆ˜** ê¸°ì¤€ì…ë‹ˆë‹¤ (í•œê¸€ 1ê¸€ì = 1ë¬¸ì)

## ğŸ” JSON ê¸€ììˆ˜ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸

```python
#!/usr/bin/env python3
# scripts/metadata/check_json_chars.py

import json
import sys

# ê¸€ììˆ˜ ì œí•œ ì„¤ì •
CHAR_LIMITS = {
    'name': 30,
    'subtitle': 30,
    'keywords': 100,
    'description': 4000
}

def check_json_character_limits(config_path):
    """JSON ì„¤ì • íŒŒì¼ì˜ ê¸€ììˆ˜ ì œí•œ ê²€ì¦"""
    print(f"ğŸ” JSON ë©”íƒ€ë°ì´í„° ê¸€ììˆ˜ ê²€ì¦: {config_path}")

    with open(config_path, 'r', encoding='utf-8') as f:
        config = json.load(f)

    app_name = config.get('app_name', 'unknown')
    violations = []

    print(f"\nğŸ“± ì•±: {app_name}")
    print("=" * 50)

    for lang, data in config.get('localization', {}).items():
        print(f"\nğŸŒ ì–¸ì–´: {lang}")

        for field, content in data.items():
            if field in CHAR_LIMITS:
                char_count = len(str(content))
                limit = CHAR_LIMITS[field]

                status = "âœ…" if char_count <= limit else "âŒ"
                print(f"  {field:12} : {char_count:3d}/{limit:3d} ê¸€ì {status}")

                if char_count > limit:
                    violations.append({
                        'app': app_name,
                        'lang': lang,
                        'field': field,
                        'current': char_count,
                        'limit': limit,
                        'excess': char_count - limit
                    })

    # ê²°ê³¼ ìš”ì•½
    if violations:
        print(f"\nâŒ ê¸€ììˆ˜ ì´ˆê³¼ í•­ëª©: {len(violations)}ê°œ")
        print("-" * 50)
        for v in violations:
            print(f"  {v['lang']}.{v['field']}: {v['current']}ì ({v['excess']}ì ì´ˆê³¼)")
        return False
    else:
        print(f"\nâœ… ëª¨ë“  í•­ëª©ì´ ê¸€ììˆ˜ ì œí•œì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤!")
        return True

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("ì‚¬ìš©ë²•: python3 check_json_chars.py <config.json>")
        sys.exit(1)

    config_file = sys.argv[1]
    try:
        is_valid = check_json_character_limits(config_file)
        sys.exit(0 if is_valid else 1)
    except FileNotFoundError:
        print(f"âŒ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {config_file}")
        sys.exit(1)
    except json.JSONDecodeError:
        print(f"âŒ JSON í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤: {config_file}")
        sys.exit(1)
```

## ğŸš€ ì‚¬ìš©ë²•

### ë‹¨ì¼ íŒŒì¼ ê²€ì¦

```bash
python3 scripts/metadata/check_json_chars.py scripts/metadata/resources/config/toffs_config.json
```

### ëª¨ë“  config íŒŒì¼ ê²€ì¦

```bash
for config in scripts/metadata/resources/config/*.json; do
    echo "=== $(basename $config) ==="
    python3 scripts/metadata/check_json_chars.py "$config"
    echo
done
```

### ë¹ ë¥¸ ê¸€ììˆ˜ í™•ì¸ (íŠ¹ì • í•„ë“œ)

```bash
# íŠ¹ì • í•„ë“œì˜ ê¸€ììˆ˜ë§Œ í™•ì¸
python3 -c "
import json
with open('scripts/metadata/resources/config/toffs_config.json') as f:
    config = json.load(f)
    ko_data = config['localization']['ko']
    for field in ['name', 'subtitle', 'keywords']:
        content = ko_data.get(field, '')
        print(f'{field}: {len(content)} ê¸€ì')
"
```

## ğŸ¯ JSON êµ¬ì¡° ì˜ˆì‹œ

```json
{
  "app_name": "toffs",
  "localization": {
    "ko": {
      "name": "Toffs: ì£¼ì‹ ETF íŠ¸ë˜ì»¤", // 30ì ì œí•œ
      "subtitle": "ë°°ë‹¹ ìº˜ë¦°ë” íˆ¬ìì¼ì§€", // 30ì ì œí•œ
      "keywords": "ì£¼ì‹,etf,ë°°ë‹¹ê¸ˆ,ë‹¬ë ¥,ìˆ˜ìµë¥ ", // 100ì ì œí•œ
      "description": "ì•±ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…..." // 4000ì ì œí•œ
    },
    "en-US": {
      "name": "Toffs: Stock ETF Tracker",
      "subtitle": "Dividend Calendar Journal",
      "keywords": "stock,etf,dividend,calendar",
      "description": "Detailed app description..."
    }
  }
}
```

## ğŸ’¡ ê¸€ììˆ˜ ì´ˆê³¼ ì‹œ ìˆ˜ì • ê°€ì´ë“œ

**name (30ì ì œí•œ)**

- í•µì‹¬ í‚¤ì›Œë“œë§Œ ë‚¨ê¸°ê¸°
- ë¶ˆí•„ìš”í•œ ì¡°ì‚¬, ë¶€ì‚¬ ì œê±°

**subtitle (30ì ì œí•œ)**

- ì•±ì˜ í•µì‹¬ ê¸°ëŠ¥ë§Œ í‘œí˜„
- ì¤‘ë³µ ë‹¨ì–´ ì œê±°

**keywords (100ì ì œí•œ)**

- ì¤‘ìš”ë„ ë‚®ì€ í‚¤ì›Œë“œ ì œê±°
- ì‰¼í‘œ ë’¤ ê³µë°± ìµœì†Œí™”
- ìœ ì‚¬í•œ ì˜ë¯¸ì˜ í‚¤ì›Œë“œ í†µí•©

**description (4000ì ì œí•œ)**

- ì¤‘ë³µ ë¬¸ì¥ ì œê±°
- í•µì‹¬ ê¸°ëŠ¥ ìœ„ì£¼ë¡œ ì¶•ì•½
- ë¶ˆí•„ìš”í•œ ìˆ˜ì‹ì–´ ì œê±°
